<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>EduBoard</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@2.1.4/dist/tesseract.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/build/pdf.min.js"></script>

  <link rel="stylesheet" href="css/index.css">
</head>

<body>

  <div id="login-screen">
    <div class="auth-box" id="login-box">
      <h2>로그인</h2>
      <input id="loginUsername" type="text" placeholder="아이디">
      <input id="loginPassword" type="password" placeholder="비밀번호">
      <button onclick="loginDirect()">로그인</button>
      <p style="font-size:0.85rem;">
        아이디가 없으신가요? <a href="#" onclick="showSignup()">회원가입</a>
      <div class="login-help">
        <a href="find-id.html">아이디 찾기</a>
        <span>|</span>
        <a href="find-password.html">비밀번호 찾기</a>
      </div>
      </p>
      <div id="loginStatus" style="font-size:0.85rem;color:red;"></div>
    </div>

    <!-- 회원가입 박스 -->
    <div class="auth-box" id="signup-box" style="display:none;">
      <h2>회원가입</h2>

      <!-- 개인정보 수집, 이용 동의 -->
      <div style="
        text-align:left;
        font-size:0.8rem;
        margin:0.5rem 0;
        border:1px solid #ddd;
        padding:0.6rem;
        border-radius:0.5rem;
        background:#f8f9fa;">
        <p style="margin:0 0 0.4rem 0; font-weight:bold;">📌 개인정보 수집·이용 동의</p>
        <p style="margin:0 0 0.3rem 0; line-height:1.4;">
          수집 항목: 아이디, 비밀번호, 이메일, 이름, 학년, 반, 번호<br>
          이용 목적: EduBoard 회원 관리 및 수업 자료 제공<br>
          보유 기간: 회원 탈퇴 시까지 (법령에 따라 보관 필요 시 해당 기간 보존)<br>
          동의 거부 시 회원가입이 제한됩니다.
        </p>
        <label style="display:flex;align-items:center;font-weight:600;">
          <input type="checkbox" id="privacy-agree" style="margin-right:0.4rem;">
          위 개인정보 수집·이용에 동의합니다.
        </label>
      </div>

      <!-- 입력 폼 -->
      <input id="signupUsername" type="text" placeholder="아이디">
      <div style="position:relative; margin-bottom: 0.8rem;">
        <input id="signupPassword" type="password" placeholder="비밀번호 (6자 이상)" required />
        <span onclick="togglePassword('signupPassword')" style="
          position:absolute; right:10px; top:50%; transform:translateY(-50%);
          cursor:pointer;">👁️</span>
      </div>
      <div style="display: flex; gap: 0.5rem; margin-bottom: 0.8rem;">
        <input id="signupEmailId" type="text" placeholder="이메일 아이디" style="flex:1;" />
        <span>@</span>
        <select id="signupEmailDomain" style="flex:1;">
          <option value="gmail.com">gmail.com</option>
          <option value="naver.com">naver.com</option>
          <option value="daum.net">daum.net</option>
          <option value="직접입력">직접입력</option>
        </select>
      </div>
      <input id="signupEmailCustom" type="text" placeholder="도메인 입력" style="display:none; margin-bottom:0.8rem;" />
      <input id="signupName" type="text" placeholder="이름">
      <input id="signupGrade" type="number" placeholder="학년">
      <input id="signupClass" type="number" placeholder="반">
      <input id="signupNumber" type="number" placeholder="번호">

      <!-- 회원가입 버튼 (동의 시 보이도록) -->
      <button id="signup-btn" onclick="signup()" style="display:none;">회원가입 완료</button>

      <p style="font-size:0.85rem;">
        <a href="#" onclick="showLogin()">← 로그인으로 돌아가기</a>
      </p>
      <div id="signupStatus" style="font-size:0.85rem;color:red;"></div>
    </div>
  </div>

  <div id="main-app" style="display:none;">
    <header>
      <h1>EduBoard</h1>
      <div id="profile-wrapper" style="position: relative;">
        <button id="profile-button" style="
            background: none;
            border: none;
            font-size: 1rem;
            font-weight: 600;
            color: #333;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 4px;">
          👤 <span id="profile-name-display">이름</span> ▼
        </button>
        <div id="profile-dropdown" style="
            display: none;
            position: absolute;
            right: 0;
            top: 120%;
            background: #fff;
            border: 1px solid #dee2e6;
            border-radius: 0.5rem;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            z-index: 1000;
            min-width: 140px;">
          <button onclick="showPanel('inventory-panel')" style="
              width: 100%;
              padding: 0.6rem 1rem;
              background: none;
              border: none;
              text-align: left;
              color: black;
              cursor: pointer;
              font-size: 0.95rem;">
            내 인벤토리
          </button>
          <button onclick="showPanel('profile-panel')" style="
              width: 100%;
              padding: 0.6rem 1rem;
              background: none;
              border: none;
              text-align: left;
              color: black;
              cursor: pointer;
              font-size: 0.95rem;">
            내 설정
          </button>
          <button onclick="logout()" style="
              width: 100%;
              padding: 0.6rem 1rem;
              background: none;
              border: none;
              text-align: left;
              color: black;
              cursor: pointer;
              font-size: 0.95rem;">
            로그아웃
          </button>
        </div>
      </div>

      <!-- ✅ 오버레이 -->
      <div id="mobile-overlay" class="mobile-overlay" onclick="closeMobileMenu()"></div>
    </header>

    <div class="mobile-only mobile-header">
      <div class="menu-icon" onclick="toggleMobileMenu()">☰</div>
      <div class="mobile-title">EduBoard</div>
      <div class="mobile-user" id="mobile-user-name">이름</div>
    </div>

    <nav id="main-nav">
      <a href="#" onclick="showPanel('dashboard')">대시보드</a>
      <a href="#" onclick="showPanel('notice-panel')">공지사항</a>
      <a href="#" onclick="showPanel('doc-panel')">수행 등록</a>
      <a href="#" onclick="showPanel('homework-panel')">파일 공유 & 자료실</a>
      <!-- <a href="#" onclick="showPanel('chat-panel')">대화실</a> -->
      <a href="#" onclick="showPanel('timetable-panel')">시간표</a>
      <a href="#" onclick="showPanel('minigame-panel')">미니게임</a>
      <a href="#" onclick="showPanel('shop-panel')">상점</a>
    </nav>

    <div class="content">
      <div id="dashboard" class="panel active">
        <h2>🏠 대시보드</h2>
        <div class="dash-top">

          <div class="card" data-section="notice">
            <div class="card-body">
              <div class="section-head">
                <h3>📢 최근 공지</h3>
                <span class="mini" id="dash-notice-date"></span>
              </div>
              <div id="dash-notice-list" class="notice-list"></div>
            </div>
          </div>

          <div class="card" data-section="profile">
            <div class="card-body">
              <div class="profile-card">
                <span class="lvl-badge">Lv <span id="lv-num">1</span></span>

                <div class="profile-illust">
                  <div class="profile-avatar" id="dash-avatar">🙂</div>
                </div>

                <div class="profile-info">
                  <div class="info-top">
                    <div class="profile-name">
                      <span id="dash-name">admin</span>
                      <small id="dash-role" style="margin-left:4px;color:#6c757d">학생</small>
                    </div>
                    <div class="points-chip">
                      <span class="p-dot"></span> P <span id="coin-balance" style="margin-left:4px">1</span>
                    </div>
                  </div>

                  <div class="profile-sub">
                    <div id="dash-school">봉담중학교</div>
                    <div><span id="dash-grade">-</span>학년 <span id="dash-class">-</span>반 <span id="dash-num">0</span>번
                    </div>
                  </div>

                  <div class="lvl-wrap">
                    <div class="lvl-head">
                      <span>경험치</span>
                      <span><span id="exp-cur">0</span> / <span id="exp-need">20</span></span>
                    </div>
                    <div class="lvl-bar">
                      <div id="lvl-fill" class="lvl-fill"></div>
                    </div>
                  </div>

                  <div class="todo-section">
                    <h4>빈칸(아래 여백) 추천 받아요</h4>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="card" data-section="schedule">
            <div class="card-body">
              <div class="section-head">
                <h3>📄 일정</h3>
              </div>

              <div class="sched-toolbar">
                <button id="sched-prev" class="mini-btn">⏪</button>
                <div id="sched-month-label" class="sched-month"></div>
                <button id="sched-next" class="mini-btn">⏩</button>
              </div>

              <div class="sched-week-row">
                <span>일</span><span>월</span><span>화</span><span>수</span><span>목</span><span>금</span><span>토</span>
              </div>

              <div id="sched-grid" class="sched-grid"></div>

              <div class="sched-detail">
                <h4 id="sched-detail-title">날짜를 선택하세요</h4>
                <ul id="sched-detail-list"></ul>
              </div>
            </div>
          </div>

          <div class="card" data-section="timetable">
            <div class="card-body">
              <div class="section-head" style="display:flex;align-items:center;justify-content:space-between;">
                <h3>🕒 시간표 <span id="badge-day" class="badge" style="margin-left:6px;"></span></h3>
                <div class="controls" style="display:flex;gap:8px;align-items:center;">
                  <input type="date" id="datePicker" />
                  <select id="classSelect" style="display:none"></select>
                </div>
              </div>

              <ul id="timetable" style="list-style:none;margin:12px 0 0;padding:0;"></ul>
              <div id="notice" style="display:none;color:#6c757d;padding:12px 0;"></div>
            </div>
          </div>

          <div class="card" id="rank-card" data-section="rank">
            <div class="card-body">
              <div class="section-head" style="display:flex;align-items:center;justify-content:space-between;">
                <h3>🏆 랭킹</h3>
                <div style="display:flex;gap:6px;align-items:center;">

                  <select id="rank-metric" style="border:1px solid #e9ecef;border-radius:10px;padding:6px 8px;">
                    <option value="coin">포인트</option>
                    <option value="level">레벨</option>
                  </select>

                  <select id="rank-scope" style="border:1px solid #e9ecef;border-radius:10px;padding:6px 8px;">
                    <option value="class">같은 반</option>
                    <option value="grade">같은 학년</option>
                    <option value="school">전교</option>
                  </select>
                  <button class="mini-btn" id="rank-refresh">새로고침</button>
                </div>
              </div>

              <ul id="rank-list" style="list-style:none;margin:10px 0 0;padding:0;"></ul>
              <div id="rank-me"
                style="margin-top:12px;padding:10px;border:1px dashed #e9ecef;border-radius:10px;background:#fafafa;display:none">
              </div>
            </div>
          </div>

          <div class="card" data-section="meal">
            <div class="card-body">
              <div class="section-head">
                <h3>🍽️ 급식</h3>
                <div style="display:flex;gap:8px;align-items:center;margin:8px 0">
                  <input type="date" id="mealDatePicker" />
                </div>
              </div>
              <div id="meal-box"></div>
            </div>
          </div>
        </div>
      </div>


      <div id="notice-panel" class="panel" style="display:none;">
        <h2>📢 공지사항</h2>
        <div id="notice-list"></div>
        <h3>새 공지 등록</h3>
        <input type="text" id="notice-title" placeholder="제목" />
        <textarea id="notice-content" placeholder="내용"></textarea>

        <input type="file" id="notice-image" accept="image/*">
        <div id="filePreviewContainer" class="preview-container"></div>


        <label style="display:flex;align-items:center;margin-top:0.5rem;">
          <input type="checkbox" id="notice-upload-check" style="margin-right:0.5rem;">
          이 사진을 공지에 포함하기
        </label>

        <button onclick="addNotice()">공지 추가</button>
      </div>

      <div id="admin-panel" class="panel cursor-pointer hover:bg-gray-50" style="display:none;"
        onclick="window.location.href='admin.html'">
        <h2>⚙️ 관리자 설정</h2>
      </div>

      <div id="doc-panel" class="panel">
        <h2>📄 수행 평가 업로드</h2>
        <input type="file" id="doc-file" accept=".pdf,.jpg,.png" />
        <div class="button-group">
          <button onclick="analyzeDocument()">문서 분석하기</button>
        </div>

        <h3>분석 결과</h3>

        <div id="doc-form">
          <label>과목</label>
          <input id="af-subject" type="text" placeholder="예: 수학">

          <label>수행 날짜</label>
          <input id="af-date" type="date" oninput="syncYoilFromDate()">

          <label>요일</label>
          <input id="af-yoil" type="text" readonly placeholder="자동 계산">

          <label>교시</label>
          <input id="af-period" type="number" min="1" max="7" placeholder="예: 3">

          <label>평가 주제</label>
          <input id="af-topic" type="text" placeholder="예: 일차방정식 활용">

        </div>


        <img id="doc-preview" style="max-width:100%; margin-top:1rem; display:none; border-radius:0.5rem;" />

        <label style="display:flex;align-items:center;margin-top:0.5rem;">
          <input type="checkbox" id="upload-image-check" style="margin-right:0.5rem;">
          이 사진을 공지에 같이 올리기
        </label>

        <div class="button-group">
          <button onclick="registerAnalyzedText()">분석된 글 등록하기</button>
        </div>
      </div>

      <div id="homework-panel" class="panel" style="display:none;">
        <h2>📚 파일 공유 & 자료실</h2>

        <label for="homework-scope">공유 범위</label>
        <select id="homework-scope">
          <option value="school">전교</option>
          <option value="grade">같은 학년</option>
          <option value="class">같은 반</option>
        </select>

        <label for="homework-userinfo">학번 + 이름</label>
        <input type="text" id="homework-userinfo" readonly
          style="background:#f1f3f5; font-weight:bold; margin-bottom:0.8rem;">

        <label for="homework-title">제목</label>
        <input type="text" id="homework-title" placeholder="예: 체험학습 사진">

        <label for="homework-file">파일 업로드</label>
        <input type="file" id="homework-file" multiple>

        <label for="homework-comment">코멘트 (선택)</label>
        <textarea id="homework-comment" placeholder="코멘트를 입력해 주세요"></textarea>

        <button onclick="submitHomework()">업로드하기</button>
        <div id="homework-status" style="margin-top:0.5rem;font-size:0.9rem;color:#007bff;"></div>

        <hr style="margin:1.5rem 0;">

        <h3>📂 업로드된 자료</h3>
        <button onclick="loadMaterials()">🔄 목록 새로고침</button>
        <ul id="material-list" style="margin-top:1rem;"></ul>
      </div>

      <!-- 🛍️ 상점 패널 -->
      <div id="shop-panel" class="panel" style="display:none;">
        <h2>🛍️ 포인트 상점</h2>
        <p>포인트를 사용하여 테마를 구매하고 꾸며보세요!</p>
        <div
          style="margin-bottom: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 8px; border: 1px solid #dee2e6;">
          <strong>💰 내 포인트:</strong> <span id="shop-coin-balance">0</span>
        </div>
        <div id="shop-list" class="shop-grid">
          <!-- JS로 아이템 렌더링 -->
          <p>상점 아이템을 불러오는 중...</p>
        </div>
      </div>

      <div id="inventory-panel" class="panel" style="display:none; max-width:960px; margin:0 auto; padding:16px;">
        <h2>🎒 나의 인벤토리</h2>
        <div id="inventory-list" style="
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    gap: 12px;">
          <p>로딩 중...</p>
        </div>
      </div>

      <div id="profile-panel" class="panel" style="display:none; max-width:960px; margin:0 auto; padding:16px;">

        <h2 style="margin-bottom:16px;">내 설정</h2>

        <!-- 📌 기본 프로필 관리 -->
        <div class="profile-card-container">
          <div class="profile-section-title">
            <span>📌</span> 기본 프로필 관리
          </div>

          <div class="grid2">
            <label>이름</label>
            <input id="profile-name" type="text" placeholder="홍길동" class="input">

            <label>아이디</label>
            <input id="profile-username" type="text" placeholder="영어/숫자만" class="input">

            <label>이메일</label>
            <input id="profile-email" type="email" placeholder="example@school.kr" class="input">
          </div>
          <input type="hidden" id="profile-username-origin">
          
          <div class="grid2">
            <label>학년</label>
            <input id="profile-grade" type="text" class="input" readonly>

            <label>반</label>
            <input id="profile-class" type="text" class="input" readonly>

            <label>번호</label>
            <input id="profile-number" type="text" class="input" readonly>
          </div>

          <div class="row-btns">
            <button id="btn-profile-save" class="btn">프로필 저장</button>
            <button id="btn-profile-refresh" class="btn btn-secondary">새로고침</button>
          </div>
          <div id="profile-status" class="small-muted"></div>
        </div>
        <!-- 🔐 비밀번호 변경 영역 분리 -->
        <div class="profile-card-container">
          <div class="profile-section-title">
            <span>🔐</span> 비밀번호 변경
          </div>
          <div class="grid2">
            <label>새 비밀번호</label>
            <input id="profile-newpass" type="password" placeholder="8자 이상 권장" class="input">
            <label>새 비밀번호 확인</label>
            <input id="profile-newpass2" type="password" placeholder="새 비밀번호 확인" class="input">
          </div>
          <div class="row-btns">
            <button id="btn-profile-pass" class="btn btn-red">비밀번호 변경</button>
          </div>
          <div id="profile-pass-status" class="small-muted"></div>
        </div>
        <!-- 📌 계정/보안 -->
        <div class="profile-card-container">
          <div class="profile-section-title">
            <span>📌</span> 계정/보안 (테스트 중)
          </div>
          <div class="row-btns">
            <button id="btn-session-logout" class="btn btn-secondary">현재 기기 로그아웃</button>
            <button id="btn-session-global-logout" class="btn btn-secondary">모든 기기 로그아웃</button>
            <button id="btn-password-reset" class="btn btn-secondary">비밀번호 재설정 메일</button>
            <button id="btn-account-delete" class="btn btn-danger">계정 삭제/탈퇴 (요청)</button>
          </div>
        </div>

        <!-- 📌 알림/환경 설정 -->
        <div class="profile-card-container">
          <div class="profile-section-title">
            <span>📌</span> 알림/환경 설정 (테스트 중)
          </div>

          <div style="display:grid;grid-template-columns:1fr auto;gap:10px;align-items:center;margin-bottom:12px;">
            <div>
              <div style="font-weight:600;">공지 알림</div>
              <div style="color:#6b7280;font-size:.9rem;">새 공지 등록 시 알림</div>
            </div>
            <input id="pref-notice" type="checkbox">

            <div>
              <div style="font-weight:600;">숙제/과제 알림</div>
              <div style="color:#6b7280;font-size:.9rem;">마감 전 리마인더</div>
            </div>
            <input id="pref-homework" type="checkbox">

            <div>
              <div style="font-weight:600;">푸시 알림</div>
              <div style="color:#6b7280;font-size:.9rem;">브라우저 푸시(지원 브라우저)</div>
            </div>
            <input id="pref-push" type="checkbox">
          </div>

          <div class="grid2">
            <label>테마</label>
            <select id="pref-theme" class="input">
              <option value="light">밝은 모드</option>
              <option value="dark">어두운 모드</option>
              <option value="system">시스템 기본</option>
            </select>

            <label>언어</label>
            <select id="pref-lang" class="input">
              <option value="ko">한국어</option>
              <option value="en">English</option>
            </select>
          </div>

          <div class="row-btns">
            <button id="btn-pref-save" class="btn">환경 저장</button>
            <button id="btn-pref-reset" class="btn btn-secondary">기본값으로</button>
          </div>
          <div id="pref-status" class="small-muted"></div>
        </div>

        <!-- 📌 기타 -->
        <div class="profile-card-container">
          <div class="profile-section-title">
            <span>📌</span> 기타 (테스트 중)
          </div>
          <div class="row-btns">
            <button id="btn-go-notices" class="btn btn-secondary">공지/이벤트 바로가기</button>
            <button id="btn-go-help" class="btn btn-secondary">도움말/FAQ/1:1 문의</button>
            <button id="btn-check-updates" class="btn btn-secondary">업데이트 확인</button>
          </div>
          <div id="app-version" class="small-muted">v—1.09</div>
        </div>
      </div>



      <div id="timetable-panel" class="panel" style="display:none;">
        <h2>🗓️ 나의 시간표</h2>
        <p style="margin-bottom:1rem; color:#495057; font-size:0.95rem;">
          봉담중학교 / 로그인한 학년·반 기준 시간표를 아래에서 확인하세요.
        </p>

        <div id="timetable-info" style="
                display:flex;
                justify-content:space-between;
                align-items:center;
                background:#f1f3f5;
                padding:0.75rem 1rem;
                border-radius:0.5rem;
                margin-bottom:1rem;
                font-size:0.9rem;
                color:#333;">

          <span id="timetable-grade-info">학년/반 정보 불러오는 중...</span>

          <div class="week-nav">
            <button class="nav-btn" onclick="moveTimetable(-1)">⏪ 이전</button>
            <button class="nav-btn" onclick="moveTimetable(0)">새로고침</button>
            <button class="nav-btn" onclick="moveTimetable(1)">⏩ 다음</button>
          </div>
        </div>
        <div id="timetable-container"
          style="display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:10px;">
        </div>
      </div>

      <div id="minigame-panel" class="panel" style="display:none;">
        <h2>🎮 미니게임</h2>
        <!-- 4=10 게임 -->
        <div style="border:1px solid #ddd;padding:1rem;border-radius:0.75rem;margin-bottom:1rem;">
          <h3>🧮 4 = 10 퍼즐</h3>
          <p>숫자 4개로 연산하여 10을 만들어보세요<br><strong>💰 5포인트 필요</strong></p>
          <button onclick="startGame('fourEqualsTen')">게임 시작</button>
        </div>
        <!-- 🧩 미로 탈출 -->
        <div style="border:1px solid #ddd;padding:1rem;border-radius:0.75rem;margin-bottom:1rem;">
          <h3>🧩 미로 탈출(테스트)</h3>
          <p>10×10 미로에서 출구까지 도달하세요<br><strong>💰 5포인트 필요</strong></p>
          <button onclick="startGame('mazeEscape')">게임 시작</button>
        </div>

        <!-- 🧱 Falling Blocks -->
        <div style="border:1px solid #ddd;padding:1rem;border-radius:0.75rem;margin-bottom:1rem;">
          <h3>🧱 Falling Blocks(테스트)</h3>
          <p>떨어지는 블록을 피하면서 오래 살아남으세요<br><strong>💰 5포인트 필요</strong></p>
          <button onclick="startGame('fallingBlocks')">게임 시작</button>
        </div>

        <!-- ⚡ Reaction -->
        <div style="border:1px solid #ddd;padding:1rem;border-radius:0.75rem;margin-bottom:1rem;">
          <h3>⚡ Reaction(테스트)</h3>
          <p>랜덤 신호에 얼마나 빨리 반응할 수 있나요?<br><strong>💰 5포인트 필요</strong></p>
          <button onclick="startGame('reaction')">게임 시작</button>
        </div>

        <!-- 🐦 Flappy 스타일 -->
        <div style="border:1px solid #ddd;padding:1rem;border-radius:0.75rem;margin-bottom:1rem;">
          <h3>🐦 점프 피하기(테스트)</h3>
          <p>터치/스페이스로 위로 점프하며 장애물을 피해보세요<br><strong>💰 5포인트 필요</strong></p>
          <input id="game-input" placeholder="예: (1+3)×2+4" style="width:100%;padding:0.5rem;">
        </div>
      </div>
    </div>




    <div id="fourEqualsTen-game" class="panel" style="display:none;">
      <h2>🧮 4 = 10 게임</h2>
      <p>아래 숫자를 사용해 사칙연산으로 10을 만들어보세요.</p>
      <div id="game-numbers" style="font-size:1.5rem; margin-bottom:0.5rem;"></div>
      <input id="game-input" placeholder="예: (1+3)×2+4" style="width:100%;padding:0.5rem;">
      <button onclick="checkFourEqualsTen()">제출</button>
      <p id="game-feedback" style="margin-top:0.5rem;font-weight:bold;"></p>
      <button onclick="exitMiniGame()">❌ 나가기</button>
    </div>

    <!-- 🧩 미로 탈출 -->
    <div id="mazeEscape-game" class="panel"
      style="display:none;border:1px solid #ddd;padding:1rem;border-radius:0.75rem;">
      <h3>🧩 미로 탈출</h3>
      <p>방향키 / 스와이프로 출구까지 도달하세요<br>
        ⏱ 30초 이내 +10점 / 35초 이내 +5점</p>
      <canvas id="maze-cv" width="300" height="300" style="border:1px solid #ddd"></canvas>
    </div>

    <!-- 🧱 Falling Blocks -->
    <div id="fallingBlocks-game" class="panel"
      style="display:none;border:1px solid #ddd;padding:1rem;border-radius:0.75rem;">
      <h3>🧱 Falling Blocks</h3>
      <p>떨어지는 블록을 피하면서 오래 살아남으세요</p>
      <canvas id="fall-cv" width="300" height="360" style="border:1px solid #ddd"></canvas>
    </div>

    <!-- ⚡ Reaction -->
    <div id="reaction-game" class="panel"
      style="display:none;border:1px solid #ddd;padding:1rem;border-radius:0.75rem;">
      <h3>⚡ Reaction</h3>
      <p>랜덤 신호에 얼마나 빨리 반응할 수 있나요?</p>
      <div id="rx-pad"
        style="width:300px;height:200px;display:flex;align-items:center;justify-content:center;border:1px solid #ddd;margin-bottom:.5rem">
        🔵 Ready
      </div>
      <button id="rx-start">Start</button>
      <div style="margin-top:.5rem">
        ⏱ 최근 반응: <span id="rx-last">—</span> | <span id="rx-best">Best —</span>
      </div>
    </div>

    <!-- 🐦 플래피 스타일 -->
    <div id="flappy-game" class="panel" style="display:none;border:1px solid #ddd;padding:1rem;border-radius:0.75rem;">
      <h3>🐦 점프 피하기</h3>
      <p>스페이스/터치로 점프하며 장애물을 피해보세요</p>
      <div id="mini-flappy"></div>
    </div>

  </div>
  </div>

  <div id="mobile-side-menu" class="mobile-only mobile-side-menu">
    <ul class="menu-section">
      <li><a href="#" onclick="showPanel('dashboard');closeMobileMenu()">🏠대시보드</a></li>
      <li><a href="#" onclick="showPanel('notice-panel'); closeMobileMenu()">📢 공지사항</a></li>
      <li><a href="#" onclick="showPanel('doc-panel'); closeMobileMenu()">📄 수행 등록</a></li>
      <li><a href="#" onclick="showPanel('homework-panel'); closeMobileMenu()">📁 자료실</a></li>
      <li><a href="#" onclick="showPanel('timetable-panel'); closeMobileMenu()">🕒 시간표</a></li>
      <li><a href="#" onclick="showPanel('minigame-panel'); closeMobileMenu()">🎮 미니게임</a></li>
      <span onclick="closeImageModal()"
        style="color:white;font-size:2rem;position:absolute;top:20px;right:30px;cursor:pointer;">&times;</span>
      <img id="modalImage" src="" style="max-width:90%; max-height:80%; border-radius:8px;" />
  </div>

  <script src="js/index.js"></script>

</body>

</html>