<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>2-3반 학급 사이트</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body{
      margin:0;
      font-family:system-ui,sans-serif;
      background:#f8fafc;
      color:#1f2937;
      transition:background .3s,color .3s;
    }
    body.dark{background:#0f172a;color:#f1f5f9}
    header{
      background:linear-gradient(135deg,#4f46e5,#3b82f6);
      color:white;padding:1rem 1.5rem;
      display:flex;justify-content:space-between;align-items:center;
    }
    header h1{margin:0;font-size:1.3rem;font-weight:700}
    nav{display:flex;gap:.8rem;flex-wrap:wrap}
    nav a{color:white;text-decoration:none;font-size:.9rem}
    nav a:hover{text-decoration:underline}
    .wrap{max-width:1000px;margin:20px auto;padding:0 1rem}
    h2{font-size:1.2rem;font-weight:600;margin:0 0 .75rem 0}
    .card{
      background:white;border-radius:1rem;padding:1.2rem;
      box-shadow:0 2px 8px rgba(0,0,0,0.05);margin-bottom:20px
    }
    body.dark .card{background:#1e293b}
    .grid-2{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px}
    .grid-4{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:12px}
    .btn{
      padding:.55rem .9rem;border-radius:.6rem;border:1px solid #d1d5db;
      background:white;font-size:.9rem;cursor:pointer
    }
    .btn.primary{background:#60a5fa;color:white;border:none}
    .btn.primary:hover{background:#3b82f6}
    body.dark .btn{background:#334155;color:#f1f5f9;border-color:#475569}
    ul{margin:0;padding-left:1rem}
    .seat{background:#f9fafb;border:1px solid #e2e8f0;border-radius:.5rem;padding:.5rem;text-align:center}
    body.dark .seat{background:#334155;border-color:#475569}
    .gallery-item{border:1px solid #e2e8f0;border-radius:.75rem;padding:.9rem;text-align:center;background:#fafafa}
    body.dark .gallery-item{background:#334155;border-color:#475569}
    .muted{color:#6b7280;font-size:.85rem}
    body.dark .muted{color:#94a3b8}

    /* 반응형 */
    @media(max-width:640px){
      header{flex-direction:column;align-items:flex-start}
      nav{display:none;flex-direction:column;gap:.5rem;margin-top:.5rem}
      nav.show{display:flex}
      .hamburger{display:block;cursor:pointer;margin-top:.5rem}
    }
    @media(min-width:641px){
      .hamburger{display:none}
    }
  </style>
</head>
<body>
  <header>
    <div>
      <h1>🏫 2-3반 학급 사이트</h1>
      <div class="hamburger" onclick="toggleMenu()">☰ 메뉴</div>
    </div>
    <nav id="nav">
      <a href="#notices">공지</a>
      <a href="#assign">과제</a>
      <a href="#timetable">시간표</a>
      <a href="#clean">청소/자리</a>
      <a href="#test">테스트</a>
      <a href="#attendance">출석</a>
      <a href="#gallery">갤러리</a>
      <a href="#points">포인트</a>
      <button class="btn" onclick="toggleDark()">🌙 모드</button>
    </nav>
  </header>

  <div class="wrap">

    <!-- 빠른메뉴 -->
    <div class="card grid-4">
      <button class="btn primary" onclick="location.hash='#assign'">📝 과제</button>
      <button class="btn primary" onclick="location.hash='#notices'">📢 공지</button>
      <button class="btn primary" onclick="location.hash='#clean'">🧹 청소/자리</button>
      <button class="btn primary" onclick="location.hash='#test'">📝 테스트</button>
    </div>

    <!-- 공지 -->
    <div id="notices" class="card">
      <h2>📢 공지사항</h2>
      <div id="notice-list" class="muted">불러오는 중…</div>
    </div>

    <!-- 과제 + 시간표 -->
    <div class="grid-2">
      <div id="assign" class="card">
        <h2>📝 과제</h2>
        <div id="assign-list" class="muted">불러오는 중…</div>
      </div>
      <div id="timetable" class="card">
        <h2>🗓️ 시간표</h2>
        <div id="timetable-grid" class="grid-4"></div>
      </div>
    </div>

    <!-- 청소/자리 -->
    <div id="clean" class="card">
      <h2>🧹 청소 당번 & 🪑 자리 배치</h2>
      <button class="btn" onclick="shuffleSeats()">🔄 자리 바꾸기</button>
      <div id="seat-map" class="grid-4" style="margin-top:1rem"></div>
    </div>

    <!-- 출석 -->
    <div id="attendance" class="card">
      <h2>✅ 출석 체크</h2>
      <ul id="att-list"></ul>
    </div>

    <!-- 간단 테스트 -->
    <div id="test" class="card">
      <h2>📝 간단 테스트</h2>
      <p class="muted">문제: 5 × 6 = ?</p>
      <input id="test-answer" type="number" placeholder="정답 입력"
             style="padding:.5rem;border:1px solid #cbd5e1;border-radius:.5rem" />
      <button class="btn primary" onclick="checkTest()">제출</button>
      <div id="test-result" style="margin-top:.5rem"></div>
    </div>

    <!-- 갤러리 -->
    <div id="gallery" class="card">
      <h2>📂 자료실 & 갤러리</h2>
      <div id="files" class="grid-4"></div>
    </div>

    <!-- 포인트 -->
    <div id="points" class="card">
      <h2>🏆 포인트 보드</h2>
      <div id="points-list"></div>
    </div>
  </div>

  <script>
    const $=(id)=>document.getElementById(id);

    /* 메뉴 토글 */
    function toggleMenu(){ $('nav').classList.toggle('show'); }

    /* 다크 모드 */
    function toggleDark(){ document.body.classList.toggle('dark'); }

    /* 공지 (더미) */
    function loadNotices(){
      $('notice-list').innerHTML='<ul><li>중간평가 안내</li><li>현장학습 동의서 제출</li></ul>';
    }

    /* 과제 */
    function loadAssignments(){
      $('assign-list').innerHTML='<ul><li>수학 p.42~45</li><li>과학 보고서</li></ul>';
    }

    /* 시간표 */
    function loadTimetable(){
      $('timetable-grid').innerHTML='<div>국어</div><div>수학</div><div>과학</div><div>영어</div>';
    }

    /* 자리 */
    const seats=['철수','영희','민수','지은','준호','예진','가영','동현','현수','서연'];
    function renderSeats(list){
      $('seat-map').innerHTML='';
      list.forEach(n=>{
        const d=document.createElement('div');d.className='seat';d.textContent=n;$('seat-map').appendChild(d);
      });
    }
    function shuffleSeats(){
      const arr=[...seats];
      for(let i=arr.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[arr[i],arr[j]]=[arr[j],arr[i]];}
      renderSeats(arr);
    }

    /* 출석 체크 */
    function loadAttendance(){
      const ul=$('att-list');
      seats.forEach(name=>{
        const li=document.createElement('li');
        li.innerHTML=`${name} 
          <button class="btn" onclick="mark(this,'출석')">출석</button>
          <button class="btn" onclick="mark(this,'지각')">지각</button>
          <button class="btn" onclick="mark(this,'결석')">결석</button>`;
        ul.appendChild(li);
      });
    }
    function mark(btn,status){
      btn.parentElement.innerHTML=btn.parentElement.textContent.split(' ')[0]+" - "+status;
    }

    /* 테스트 */
    function checkTest(){
      const val=Number($('test-answer').value),res=$('test-result');
      let score=localStorage.getItem('quizScore')||0;
      if(val===30){res.textContent='✅ 정답! +5점';res.style.color='green';score=Number(score)+5;}
      else{res.textContent='❌ 오답';res.style.color='red';}
      localStorage.setItem('quizScore',score);
    }

    /* 갤러리 */
    function loadGallery(){
      $('files').innerHTML='<div class="gallery-item">사진 모음</div><div class="gallery-item">수학 프린트</div>';
    }

    /* 포인트 */
    function loadPoints(){
      const score=localStorage.getItem('quizScore')||0;
      $('points-list').innerHTML='<p>내 점수: '+score+'점</p>';
    }

    document.addEventListener('DOMContentLoaded',()=>{
      loadNotices();loadAssignments();loadTimetable();renderSeats(seats);loadAttendance();loadGallery();loadPoints();
    });
  </script>
</body>
</html>
